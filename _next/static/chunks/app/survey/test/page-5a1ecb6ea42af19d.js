(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[917],{44493:(e,t,s)=>{Promise.resolve().then(s.bind(s,84488))},46269:(e,t,s)=>{"use strict";s.d(t,{UL:()=>a,WY:()=>l});let r=(e,t)=>{let s=t[e.questionId]||[];if(0===s.length)return!1;let r=void 0!==e.value?Array.isArray(e.value)?e.value:[e.value]:void 0!==e.text?Array.isArray(e.text)?e.text:[e.text]:[];if(0===r.length)return!1;switch(e.operator){case"equals":return r.some(e=>s.includes(String(e)));case"not_equals":return!r.some(e=>s.includes(String(e)));case"contains":return r.some(e=>s.some(t=>String(t)===String(e)));default:return!1}},n=(e,t)=>{if(!e.condition)return!0;let s=Array.isArray(e.condition)?e.condition:[e.condition];return 0===s.length||s.some(e=>r(e,t))},a=(e,t)=>(e.forEach(e=>{!(!e.condition||n(e,t))&&e.id in t&&delete t[e.id]}),e.filter(e=>!e.condition||n(e,t))),l=(e,t)=>{let s={};return e.forEach(e=>{s[e.id]=n(e,t)}),s}},51368:(e,t,s)=>{"use strict";let r;s.d(t,{A:()=>i});let n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},a=new Uint8Array(16),l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));let i=function(e,t,s){if(n.randomUUID&&!t&&!e)return n.randomUUID();let i=(e=e||{}).random??e.rng?.()??function(){if(!r){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");r=crypto.getRandomValues.bind(crypto)}return r(a)}();if(i.length<16)throw Error("Random bytes length must be >= 16");if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){if((s=s||0)<0||s+16>t.length)throw RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[s+e]=i[e];return t}return function(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}(i)}},52363:(e,t,s)=>{"use strict";s.d(t,{AT:()=>r,C7:()=>c,ER:()=>i,OT:()=>l,Og:()=>o,P_:()=>u,a4:()=>n,wx:()=>d,xi:()=>a});let r=["ko","en","ja","zh"],n={ko:"한",en:"영",ja:"일",zh:"중"};var a=function(e){return e.SINGLE_CHOICE="SINGLE_CHOICE",e.SINGLE_CHOICE_2="SINGLE_CHOICE_2",e.SIDE_BY_SIDE="SIDE_BY_SIDE",e.TEXT_ENTRY="TEXT_ENTRY",e.MULTIPLE_CHOICE="MULTIPLE_CHOICE",e.MULTIPLE_CHOICE_2="MULTIPLE_CHOICE_2",e.GROUP="GROUP",e.CHECKBOX="CHECKBOX",e}({});function l(e){return"SINGLE_CHOICE"===e.type}function i(e){return"SIDE_BY_SIDE"===e.type}function c(e){return"MULTIPLE_CHOICE"===e.type}function d(e){return"GROUP"===e.type}let o={UNCLASSIFIED:"미분류",KE:"KE설문지",STAFF:"STAFF설문지",JV:"JV설문지",DOMESTIC:"국내선 설문지"},u=[o.UNCLASSIFIED,o.KE,o.STAFF,o.JV,o.DOMESTIC]},81252:(e,t,s)=>{"use strict";s.d(t,{r:()=>l});var r=s(95155),n=s(12115);let a=(e,t)=>{let s=[],r=e.replace(/([.+*?^[\]$|])/g,"\\$1").replace(/\((?!\?)/g,"(").replace(/\)/g,")").replace(/:([a-zA-Z0-9_]+)/g,(e,t)=>(s.push(t),"([^/]+)"));try{let n=t.match(new RegExp("^".concat(r,"$")));if(!n)return null;let a=n.slice(1).reduce((e,t,r)=>(e[s[r]]=t,e),{});return{route:e,params:a}}catch(t){return console.error("Invalid regex for pattern:",e,t),null}},l=e=>{let{routes:t,fallback:s}=e,[l,i]=(0,n.useState)(()=>window.location.hash.replace(/^#\/?/,"").split("?")[0]);(0,n.useEffect)(()=>{let e=()=>{i(window.location.hash.replace(/^#\/?/,"").split("?")[0])};return window.addEventListener("hashchange",e),e(),()=>{window.removeEventListener("hashchange",e)}},[]);let c=(0,n.useMemo)(()=>{for(let e of Object.keys(t).sort((e,t)=>t.length-e.length)){let s=a(e,l);if(s){let e=t[s.route],n={...s.params,params:s.params};return(0,r.jsx)(e,{...n})}}return s?(0,r.jsx)(s,{}):null},[l,t,s]);return(0,r.jsx)(r.Fragment,{children:c})}},84488:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(95155),n=s(81252),a=s(12115),l=s(6874),i=s.n(l);function c(e){let[t,s]=(0,a.useState)([]),[n,l]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{try{let e=JSON.parse(localStorage.getItem("savedSurveys")||"[]");s(e)}catch(e){console.error("설문지 목록을 불러오는 중 오류가 발생했습니다:",e)}finally{l(!1)}},[]),n)?(0,r.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"저장된 설문지 목록"}),(0,r.jsx)(i(),{href:"/survey/settings",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"새 설문지 만들기"})]}),0===t.length?(0,r.jsxs)("div",{className:"text-center py-16 bg-gray-50 rounded-xl",children:[(0,r.jsx)("p",{className:"text-lg text-gray-600 mb-4",children:"저장된 설문지가 없습니다."}),(0,r.jsx)(i(),{href:"/survey/settings",className:"text-blue-600 hover:underline",children:"새 설문지 만들기"})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow border border-gray-100",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("h3",{className:"text-lg font-semibold text-blue-600 truncate",children:e.title})}),(0,r.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,r.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})}),e.description&&(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-gray-100",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[e.questions.length,"개의 질문"]}),(0,r.jsx)("div",{className:"flex space-x-2",children:(0,r.jsx)("a",{href:"#/".concat(e.id),className:"text-blue-600 hover:underline text-sm",children:"설문 진행"})})]})]})},e.id))})]})}var d=s(51368),o=s(52363),u=s(46269);let x=e=>{let{question:t,index:s,answer:n,onAnswerChange:a,answers:l={}}=e;switch(t.type){case o.xi.SINGLE_CHOICE:case o.xi.SINGLE_CHOICE_2:case o.xi.MULTIPLE_CHOICE:case o.xi.MULTIPLE_CHOICE_2:case o.xi.CHECKBOX:{let e=t.type===o.xi.MULTIPLE_CHOICE||t.type===o.xi.MULTIPLE_CHOICE_2||t.type===o.xi.CHECKBOX,l=function(s){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return s.map((s,c)=>{let d=null==n?void 0:n.includes(s.id);return(0,r.jsxs)("div",{style:{marginLeft:"".concat(2*i,"rem")},children:[(0,r.jsxs)("div",{className:"flex items-center py-1",children:[(0,r.jsx)("input",{type:e?"checkbox":"radio",name:"q-".concat(t.id),id:"q-".concat(t.id,"-").concat(s.id),checked:d,onChange:()=>a(s.id,t.type),className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("label",{htmlFor:"q-".concat(t.id,"-").concat(s.id),className:"ml-2 text-gray-700",children:s.text||"옵션 ".concat(c+1)})]}),d&&s.children&&(0,r.jsx)("div",{className:"mt-2",children:l(s.children,i+1)})]},s.id||c)})};return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium",children:["Q",s+1,". ",t.text,t.isRequired&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,r.jsx)("div",{className:"space-y-2 mt-2 ml-4",children:l(t.props.options||[])})]})}case o.xi.GROUP:{var i;let e=(null==(i=t.props)?void 0:i.questions)||[],s=window.handleAnswerChange;return(0,r.jsxs)("div",{className:"space-y-4 border-l-4 border-blue-100 pl-4 py-2 my-4",children:[(0,r.jsxs)("h3",{className:"text-xl font-medium",children:[t.text,t.isRequired&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,r.jsx)("div",{className:"space-y-6 ml-4",children:e.map((e,t)=>(0,r.jsx)("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:(0,r.jsx)(x,{question:e,index:t,answer:l[e.id]||[],answers:l,onAnswerChange:(t,r)=>{console.log("parentHandleAnswerChange",s),console.log("q.id",e.id),console.log("value",t),console.log("type",r),s?s(e.id,t,r):(console.log("onAnswerChange",a),a(t,r))}})},e.id))})]})}case o.xi.TEXT_ENTRY:{let e=t.props||{};return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium",children:["Q",s+1,". ",t.text,t.isRequired&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,r.jsxs)("div",{className:"mt-2",children:[t.props.isLongText?(0,r.jsx)("textarea",{name:String(t.id),value:(null==n?void 0:n[0])||"",onChange:e=>a(e.target.value,t.type),placeholder:e.placeholder||"답변을 입력하세요",maxLength:e.maxLength,rows:4,className:"w-full p-2 border rounded-md"}):(0,r.jsx)("input",{type:"text",value:(null==n?void 0:n[0])||"",onChange:e=>a(e.target.value,t.type),placeholder:e.placeholder||"답변을 입력하세요",maxLength:e.maxLength,className:"w-full p-2 border rounded-md"}),e.maxLength&&(0,r.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:["최대 ",e.maxLength,"자까지 입력 가능"]})]})]})}case o.xi.SIDE_BY_SIDE:{let e=t.props||{},l=e.rows||[],i=e.columns||[];if(0===l.length||0===i.length)return(0,r.jsxs)("div",{className:"text-gray-500",children:["Q",s+1,". ",t.text," (데이터 없음)"]});let c=i.flatMap(e=>(e.subColumns||[]).map(t=>({...t,columnId:e.id})));return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium",children:["Q",s+1,". ",t.text,t.isRequired&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,r.jsx)("div",{className:"overflow-x-auto mt-2",children:(0,r.jsxs)("table",{className:"min-w-full border",children:[(0,r.jsxs)("thead",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"border p-2 bg-gray-100",rowSpan:2,style:{width:"200px"},children:"항목"}),i.map((e,t)=>(0,r.jsx)("th",{className:"border p-2 bg-gray-50",colSpan:(e.subColumns||[]).length,children:e.text||"열 ".concat(t+1)},e.id||t))]}),(0,r.jsx)("tr",{children:c.map((e,t)=>(0,r.jsx)("th",{className:"border p-2 bg-gray-50 text-sm",children:e.label||"옵션 ".concat(t+1)},e.id||t))})]}),(0,r.jsx)("tbody",{children:l.map((e,s)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"border p-2 font-medium",children:e.text||"항목 ".concat(s+1)}),c.map(l=>(0,r.jsx)("td",{className:"border p-2 text-center",children:(0,r.jsx)("input",{type:"radio",name:"row-".concat(e.id||s,"-").concat(l.columnId),checked:null==n?void 0:n.includes("".concat(e.id,":").concat(l.id)),onChange:()=>a("".concat(e.id,":").concat(l.id),t.type),className:"h-4 w-4 text-blue-600 focus:ring-blue-500"})},"".concat(l.columnId,"-").concat(l.id,"-").concat(e.id)))]},e.id||s))})]})})]})}default:return(0,r.jsxs)("div",{className:"text-gray-500",children:["Q",s+1,". ",t.text," (미리보기를 지원하지 않는 질문 유형입니다)"]})}},h={":id":function(e){let{params:t}=e,s=null==t?void 0:t.id,[n,l]=(0,a.useState)(null),[i,c]=(0,a.useState)({}),[h,m]=(0,a.useState)({}),[p,g]=(0,a.useState)(!0),[f,y]=(0,a.useState)(null);(0,a.useEffect)(()=>{(()=>{if(!s){y("설문지 ID가 제공되지 않았습니다."),g(!1);return}try{let e=JSON.parse(localStorage.getItem("savedSurveys")||"[]").find(e=>e.id===s);e?l(e):y("요청하신 설문지를 찾을 수 없습니다.")}catch(e){console.error("설문지 로딩 중 오류 발생:",e),y("설문지 로딩 중 오류가 발생했습니다.")}finally{g(!1)}})()},[s]);let j=(e,t,s)=>{c(r=>{let n=r[e]||[],a=[...n];switch(s){case o.xi.MULTIPLE_CHOICE:"string"==typeof t&&(a=n.includes(t)?n.filter(e=>e!==t):[...n,t]);break;case o.xi.SINGLE_CHOICE:case o.xi.TEXT_ENTRY:a=[t];break;case o.xi.SIDE_BY_SIDE:if("string"==typeof t){let[e]=t.split(":");a=[...n.filter(t=>!t.startsWith("".concat(e,":"))),t]}}return{...r,[e]:a}})};(0,a.useEffect)(()=>{(null==n?void 0:n.questions)&&m((0,u.WY)(n.questions,i))},[i,n]);let N=(0,a.useMemo)(()=>n?(0,u.UL)(n.questions,i):[],[n,i]);return p?(0,r.jsx)("div",{children:"로딩 중..."}):f?(0,r.jsx)("div",{className:"text-red-500",children:f}):n?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:n.title}),n.description&&(0,r.jsx)("p",{className:"text-gray-600",children:n.description}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["생성일: ",new Date(n.createdAt).toLocaleString(),n.updatedAt!==n.createdAt&&(0,r.jsxs)("span",{className:"ml-2",children:["(마지막 수정: ",new Date(n.updatedAt).toLocaleString(),")"]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("a",{href:"#/",className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"목록으로"}),(0,r.jsx)("button",{onClick:()=>{if(window.confirm("정말 이 설문지를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."))try{let e=JSON.parse(localStorage.getItem("savedSurveys")||"[]").filter(e=>e.id!==s);localStorage.setItem("savedSurveys",JSON.stringify(e)),window.location.hash="/"}catch(e){console.error("설문지 삭제 중 오류 발생:",e),alert("설문지 삭제 중 오류가 발생했습니다.")}},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"삭제하기"})]})]}),(0,r.jsx)("div",{className:"space-y-8",children:N.length>0?N.map((e,t)=>(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,r.jsx)(x,{question:e,index:t,answer:i[e.id]||[],answers:i,onAnswerChange:(t,s)=>j(e.id,t,s)})},e.id)):(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"표시할 질문이 없습니다. 이전 질문에 답변해 주세요."})}),(0,r.jsx)("div",{className:"mt-8 flex justify-end",children:(0,r.jsx)("button",{onClick:()=>{if(!n)return;for(let t of n.questions){if(!t.isRequired)continue;let s=i[t.id],r=!1;switch(t.type){case o.xi.TEXT_ENTRY:r=!!s&&s.length>0&&""!==s[0].trim();break;case o.xi.SINGLE_CHOICE:case o.xi.MULTIPLE_CHOICE:r=!!s&&s.length>0;break;case o.xi.SIDE_BY_SIDE:var e;let n=(null==(e=t.props)?void 0:e.rows)||[];if(0===n.length){r=!0;break}let a=new Set((s||[]).map(e=>e.split(":")[0]));r=n.length===a.size;break;default:r=!0}if(!r)return void alert('필수 질문입니다: "'.concat(t.text,'"'))}let t={submissionId:(0,d.A)(),surveyId:n.id,title:n.title,submittedAt:new Date().toISOString(),answers:i};try{let e=[...JSON.parse(localStorage.getItem("surveyResults")||"[]"),t];localStorage.setItem("surveyResults",JSON.stringify(e)),alert("설문이 성공적으로 제출되었습니다."),window.location.hash="/"}catch(e){console.error("설문 결과 저장 중 오류 발생:",e),alert("설문 결과 저장 중 오류가 발생했습니다.")}},className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"제출하기"})})]})}):(0,r.jsx)("div",{children:"설문지를 찾을 수 없습니다."})},"":c};function m(){return(0,r.jsx)(n.r,{routes:h,fallback:c})}}},e=>{var t=t=>e(e.s=t);e.O(0,[874,441,684,358],()=>t(44493)),_N_E=e.O()}]);