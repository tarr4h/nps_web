(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27],{35695:(e,t,s)=>{"use strict";var a=s(18999);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},82479:(e,t,s)=>{"use strict";s.d(t,{default:()=>h});var a=s(95155),n=s(12115),r=s(35695),i=s(91190),o=s(17352),d=s(31167),u=s(59515),l=s(52363),c=s(97357),x=s(76221);function h(){let{questions:e,setQuestions:t,handleAddQuestion:s,handleUpdateQuestion:h,handleRemoveQuestion:m}=(0,o.R)([]),[p,g]=(0,n.useState)(1),[f,E]=(0,n.useState)(!1),P=(0,r.useSearchParams)();(0,n.useEffect)(()=>{let e=P.get("surveyId");if(e){let s=(0,i.z$)(e);if(s){t(s.questions);let e=s.questions.length>0?Math.max(...s.questions.map(e=>e.page||1)):1;g(s.totalPages||e)}}},[P,t]);let j=Math.max(p,e.length>0?Math.max(...e.map(e=>e.page||1)):1),v=t=>{let s=e.find(e=>e.id===t);s&&h(t,{isExpanded:!s.isExpanded})},C=async e=>{try{let t={...e,totalPages:j};await (0,i.WF)(t),alert("설문지가 성공적으로 저장되었습니다.")}catch(e){console.error("설문지 저장 중 오류 발생:",e),alert("설문지 저장 중 오류가 발생했습니다.")}},N=(e,t)=>{h(e,t)},k=e=>m(e),I=(0,n.useCallback)(t=>{if(!t.groupId)return"그룹";let s=e.find(e=>e.id===t.groupId);return(null==s?void 0:s.text)||"그룹"},[e]),_=t=>(0,a.jsx)(u.h,{question:t,questions:e,onUpdate:e=>N(t.id,e),onUpdateQuestionById:(e,t)=>N(e,t)});return(0,a.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"설문조사 편집기"}),(0,a.jsxs)("button",{onClick:()=>{E(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center",children:[(0,a.jsxs)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"미리보기"]})]}),(0,a.jsx)(d.X,{onAdd:(e,t)=>{s(e,t)},onAddNewPage:()=>{let e=j+1;g(e),s(l.xi.SINGLE_CHOICE,e)},totalPages:j,onTotalPagesChange:g}),(0,a.jsx)("div",{className:"space-y-6",children:e.map((e,t)=>(0,a.jsx)(x.V,{question:e,index:t,onUpdate:t=>N(e.id,t),onRemove:()=>k(e.id),onToggleExpand:()=>v(e.id),renderEditor:_,getQuestionTypeName:e=>{switch(e){case l.xi.SINGLE_CHOICE:return"단일 선택";case l.xi.MULTIPLE_CHOICE:return"복수 선택";case l.xi.SIDE_BY_SIDE:return"병렬 비교";case l.xi.TEXT_ENTRY:return"텍스트 답변";case l.xi.GROUP:return"그룹";default:return""}},getGroupTitle:I},e.id))}),(0,a.jsx)(c.M,{isOpen:f,onClose:()=>{E(!1)},questions:e,onSave:C,totalPages:j})]})}},92047:(e,t,s)=>{Promise.resolve().then(s.bind(s,82479))}},e=>{var t=t=>e(e.s=t);e.O(0,[641,957,633,441,684,358],()=>t(92047)),_N_E=e.O()}]);