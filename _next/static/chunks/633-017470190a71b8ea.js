"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[633],{17352:(e,t,s)=>{s.d(t,{R:()=>a});var l=s(12115),r=s(51368),n=s(52363),i=s(67706);let a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,s]=(0,l.useState)(e),a=(0,l.useCallback)(function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=(0,r.A)(),i=s.reduce((e,t)=>{if(t.questionNumber){let s=parseInt(t.questionNumber.replace(/^Q(\d+)$/,"$1"),10);return isNaN(s)?e:Math.max(e,s)}return e},0),a={id:l,questionNumber:"Q".concat(i+1),text:"새 질문"+(i+1),isRequired:!1,isExpanded:!0,isGroup:!1,condition:[],page:t,order:s.length+1},o=[{id:(0,r.A)(),text:"항목 1"},{id:(0,r.A)(),text:"항목 2"},{id:(0,r.A)(),text:"항목 3"},{id:(0,r.A)(),text:"항목 4"},{id:(0,r.A)(),text:"항목 5"}];switch(e){case n.xi.CHECKBOX:case n.xi.MULTIPLE_CHOICE:case n.xi.MULTIPLE_CHOICE_2:case n.xi.SINGLE_CHOICE:case n.xi.SINGLE_CHOICE_2:return{...a,type:e,props:{options:o,optionCount:2}};case n.xi.SIDE_BY_SIDE:return{...a,type:n.xi.SIDE_BY_SIDE,props:{rows:[{id:(0,r.A)(),text:"항목 1"},{id:(0,r.A)(),text:"항목 2"}],columns:[{id:(0,r.A)(),text:"열 1",subColumns:[{id:(0,r.A)(),label:"하위 열 1-1"}]},{id:(0,r.A)(),text:"열 2",subColumns:[{id:(0,r.A)(),label:"하위 열 2-1"}]}],optionCount:2,columnCount:2,subColumnCounts:[1,1]}};case n.xi.TEXT_ENTRY:return{...a,type:n.xi.TEXT_ENTRY,props:{maxLength:250,placeholder:"답변을 입력하세요",isLongText:!0}};case n.xi.GROUP:return{...a,text:"새 그룹",type:n.xi.GROUP,props:{questions:[]},isGroup:!0};default:throw Error("Unhandled question type: ".concat(e))}},[t]),o=(0,l.useCallback)((e,t)=>{s(s=>[...s,a(e,t,s)])},[a]),d=(0,l.useCallback)((e,t)=>{s(s=>s.map(s=>{if(s.id!==e)return s;let l={...s,...t};if("props"in(l=(0,i.H)(l))&&l.props){let e={...l.props};e.options&&Array.isArray(e.options)&&(e.options=e.options.map(i.H)),e.rows&&Array.isArray(e.rows)&&(e.rows=e.rows.map(i.H)),e.columns&&Array.isArray(e.columns)&&(e.columns=e.columns.map(i.H)),l.props=e}return l}))},[]),c=(0,l.useCallback)(e=>{s(t=>{let s=t.find(t=>t.id===e);return s?s.type===n.xi.GROUP?t.map(t=>{if(t.groupId===e){let{groupId:e,isGroup:s,...l}=t;return{...l,isGroup:!1}}return t}).filter(t=>t.id!==e):t.filter(t=>t.id!==e):t})},[]),u=(0,l.useMemo)(()=>0===t.length?1:Math.max(...t.map(e=>e.page||1)),[t]);return{questions:t,setQuestions:s,totalPages:u,handleAddQuestion:o,handleRemoveQuestion:c,handleUpdateQuestion:d,createNewQuestion:a}}},31167:(e,t,s)=>{s.d(t,{X:()=>n});var l=s(95155);s(12115);var r=s(52363);function n(e){let{onAdd:t,onAddNewPage:s,totalPages:n,onTotalPagesChange:i}=e;return(0,l.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"새 질문 추가"}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("label",{className:"text-sm text-gray-600 mr-2",children:"총 페이지"}),(0,l.jsx)("input",{type:"number",min:1,value:n,onChange:e=>i(Math.max(1,Number(e.target.value)||1)),className:"w-20 px-2 py-1 border border-gray-300 rounded-md text-sm"})]})]}),(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsx)("button",{onClick:()=>t(r.xi.SINGLE_CHOICE,n),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"단일 선택"}),(0,l.jsx)("button",{onClick:()=>t(r.xi.SINGLE_CHOICE_2,n),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"단일 선택2"}),(0,l.jsx)("button",{onClick:()=>t(r.xi.MULTIPLE_CHOICE,n),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-600 text-sm",children:"복수 선택"}),(0,l.jsx)("button",{onClick:()=>t(r.xi.MULTIPLE_CHOICE_2,n),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"복수 선택2"}),(0,l.jsx)("button",{onClick:()=>t(r.xi.TEXT_ENTRY,n),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"텍스트 답변"}),(0,l.jsx)("button",{onClick:()=>t(r.xi.GROUP,n),className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm",children:"그룹"})]})]})}},46269:(e,t,s)=>{s.d(t,{UL:()=>n,WY:()=>i});let l=(e,t)=>{let s=t[e.questionId]||[];if(0===s.length)return!1;let l=void 0!==e.value?Array.isArray(e.value)?e.value:[e.value]:void 0!==e.text?Array.isArray(e.text)?e.text:[e.text]:[];if(0===l.length)return!1;switch(e.operator){case"equals":return l.some(e=>s.includes(String(e)));case"not_equals":return!l.some(e=>s.includes(String(e)));case"contains":return l.some(e=>s.some(t=>String(t)===String(e)));default:return!1}},r=(e,t)=>{if(!e.condition)return!0;let s=Array.isArray(e.condition)?e.condition:[e.condition];return 0===s.length||s.some(e=>l(e,t))},n=(e,t)=>(e.forEach(e=>{!(!e.condition||r(e,t))&&e.id in t&&delete t[e.id]}),e.filter(e=>!e.condition||r(e,t))),i=(e,t)=>{let s={};return e.forEach(e=>{s[e.id]=r(e,t)}),s}},52363:(e,t,s)=>{s.d(t,{AT:()=>l,C7:()=>o,ER:()=>a,OT:()=>i,Og:()=>c,P_:()=>u,a4:()=>r,wx:()=>d,xi:()=>n});let l=["ko","en","ja","zh"],r={ko:"한",en:"영",ja:"일",zh:"중"};var n=function(e){return e.SINGLE_CHOICE="SINGLE_CHOICE",e.SINGLE_CHOICE_2="SINGLE_CHOICE_2",e.SIDE_BY_SIDE="SIDE_BY_SIDE",e.TEXT_ENTRY="TEXT_ENTRY",e.MULTIPLE_CHOICE="MULTIPLE_CHOICE",e.MULTIPLE_CHOICE_2="MULTIPLE_CHOICE_2",e.GROUP="GROUP",e.CHECKBOX="CHECKBOX",e}({});function i(e){return"SINGLE_CHOICE"===e.type}function a(e){return"SIDE_BY_SIDE"===e.type}function o(e){return"MULTIPLE_CHOICE"===e.type}function d(e){return"GROUP"===e.type}let c={UNCLASSIFIED:"미분류",KE:"KE설문지",STAFF:"STAFF설문지",JV:"JV설문지",DOMESTIC:"국내선 설문지"},u=[c.UNCLASSIFIED,c.KE,c.STAFF,c.JV,c.DOMESTIC]},59515:(e,t,s)=>{s.d(t,{h:()=>j});var l=s(95155),r=s(12115),n=s(52363);let i=e=>{let{allQuestions:t=[],currentQuestionId:s="",conditions:i=[],onConditionChange:a,className:o=""}=e,[d,c]=(0,r.useState)(""),[u,x]=(0,r.useState)("equals"),[p,m]=(0,r.useState)([]),[h,b]=(0,r.useState)([]),g=t.filter(e=>e.id!==s&&(!i.some(t=>t.questionId===e.id)||e.id===d)),j=e=>{let t=e.questionNumber?"".concat(e.questionNumber,". "):"";return"".concat(t).concat(e.text)},f=e=>{var t,s,l,r;if(!e)return[];if((0,n.OT)(e)||(0,n.C7)(e))return(null==(s=e.props)||null==(t=s.options)?void 0:t.map(e=>({id:"string"==typeof e?e:e.id,text:"string"==typeof e?e:e.text||""})))||[];if((0,n.ER)(e)){let t=[];return null==(r=e.props)||null==(l=r.columns)||l.forEach(e=>{var s;t.push({id:e.id,text:e.text||e.id}),null==(s=e.subColumns)||s.forEach(s=>{t.push({id:s.id,text:"".concat(e.text," - ").concat(s.label)})})}),t}return[]},v=(0,r.useCallback)(()=>{if(d){let e=t.find(e=>e.id===d);if(e){let t=f(e);b(t),m(e=>e.filter(e=>t.some(t=>t.id===e)));return}}b([]),m([])},[d,t]);(0,r.useEffect)(()=>{v(),d?C(!0):C(!1)},[d,t,v]);let y=(0,r.useRef)(null),[N,C]=(0,r.useState)(!1),w=e=>{let t=[...i];t.splice(e,1),a(t)},k=e=>{h.find(t=>t.id===e)&&m(t=>"equals"===u||"not_equals"===u?[e]:t.includes(e)?t.filter(t=>t!==e):[...t,e])};(0,r.useEffect)(()=>{m([])},[u]);let E=e=>{let t=h.find(t=>t.id===e);return t?t.text:e};return(0,l.jsxs)("div",{className:"space-y-4 ".concat(o),children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"조건부 로직"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2",children:[(0,l.jsxs)("select",{className:"border rounded p-2 text-sm",value:d,onChange:e=>c(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"질문 선택"}),g.map(e=>(0,l.jsx)("option",{value:e.id,children:j(e)},e.id))]}),(0,l.jsxs)("select",{className:"border rounded p-2 text-sm",value:u,onChange:e=>x(e.target.value),disabled:!d,children:[(0,l.jsx)("option",{value:"equals",children:"같음"}),(0,l.jsx)("option",{value:"not_equals",children:"같지 않음"}),(0,l.jsx)("option",{value:"contains",children:"포함"})]}),(0,l.jsxs)("div",{className:"relative w-full",ref:y,children:[(0,l.jsx)("div",{className:"relative flex-1 cursor-pointer border rounded p-2 flex items-center justify-between",onClick:()=>{d&&C(!N)},children:0===p.length?(0,l.jsx)("span",{className:"text-gray-400",children:"선택지 선택"}):p.map(e=>(0,l.jsxs)("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded flex items-center",onClick:t=>{t.stopPropagation(),k(e)},children:[E(e),(0,l.jsx)("span",{className:"ml-1",children:"\xd7"})]},e))}),N&&d&&h.length>0&&(0,l.jsx)("div",{className:"absolute bottom-full left-0 w-full bg-white border rounded shadow-lg z-50 mb-1 max-h-60 overflow-y-auto",onClick:e=>e.stopPropagation(),children:h.map(e=>(0,l.jsx)("div",{className:"p-2 hover:bg-gray-100 cursor-pointer text-sm ".concat(p.includes(e.id)?"bg-blue-50 font-medium":""),onClick:t=>{t.stopPropagation(),k(e.id)},children:e.text},e.id))})]}),(0,l.jsx)("button",{className:"bg-blue-500 text-white px-4 py-2 rounded text-sm disabled:bg-gray-300 disabled:cursor-not-allowed",onClick:()=>{var e;if(!d||0===p.length)return;let t="equals"===u||"not_equals"===u?[p[0]]:[...p],s="equals"===u||"not_equals"===u?[(null==(e=h.find(e=>e.id===p[0]))?void 0:e.text)||""]:h.filter(e=>p.includes(e.id)).map(e=>e.text);a([...i,{questionId:d,operator:u,value:t,text:s}]),c(""),m([]),x("equals")},disabled:!d||0===p.length,children:"조건 추가"})]}),(0,l.jsx)("div",{className:"space-y-2 mt-4",children:i.map((e,s)=>{let r=t.find(t=>t.id===e.questionId),n={equals:"같음",not_equals:"같지 않음",contains:"포함"}[e.operator],i=Array.isArray(e.text)?e.text.map(e=>E(e)).join(", "):E(e.text);return(0,l.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm",children:[(0,l.jsxs)("span",{children:[(0,l.jsx)("strong",{children:(null==r?void 0:r.text)||"질문 ".concat(e.questionId.slice(0,5),"...")}),"의 답변이",(0,l.jsxs)("strong",{className:"text-blue-600",children:[" ",i]}),(0,l.jsxs)("strong",{children:[" ",n," "]})," 일 때"]}),(0,l.jsx)("button",{className:"text-red-500 hover:text-red-700",onClick:()=>w(s),children:"삭제"})]},s)})})]})]})};var a=s(51368);let o=e=>{let t;if(!e)return[{id:(0,a.A)(),type:"text",value:""}];let s=[],l=/\{\{(.+?)\}\}/g,r=0;for(;null!==(t=l.exec(e));)t.index>r&&s.push({id:(0,a.A)(),type:"text",value:e.substring(r,t.index)}),s.push({id:(0,a.A)(),type:"substitution",value:t[1]}),r=l.lastIndex;return r<e.length&&s.push({id:(0,a.A)(),type:"text",value:e.substring(r)}),s.length>0?s:[{id:(0,a.A)(),type:"text",value:""}]},d=e=>e.map(e=>"substitution"===e.type?"{{".concat(e.value,"}}"):e.value).join(""),c=e=>{let{initialQuestion:t,onQuestionChange:s,substitutions:n=["출발 공항","도착 공항"]}=e,[i,c]=(0,r.useState)(()=>o(t)),u=(e,t,l)=>{let r=i.map(s=>s.id===e?"type"===t?{...s,type:l,value:""}:{...s,[t]:l}:s);c(r),s(d(r))},x=e=>{let t={id:(0,a.A)(),type:"text",value:""},l=i.findIndex(t=>t.id===e),r=[...i];r.splice(l+1,0,t),c(r),s(d(r))},p=e=>{if(i.length<=1)return;let t=i.filter(t=>t.id!==e);c(t),s(d(t))};return(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"질문"}),(0,l.jsx)("div",{className:"space-y-2",children:i.map(e=>(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:["text"===e.type?(0,l.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:e.value,onChange:t=>u(e.id,"value",t.target.value),placeholder:"질문 내용"}):(0,l.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:e.value,onChange:t=>u(e.id,"value",t.target.value),children:[(0,l.jsx)("option",{value:"",disabled:!0,children:"선택..."}),n.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]}),(0,l.jsxs)("select",{value:e.type,onChange:t=>u(e.id,"type",t.target.value),className:"p-2 border border-gray-300 rounded-md",children:[(0,l.jsx)("option",{value:"text",children:"텍스트 입력"}),(0,l.jsx)("option",{value:"substitution",children:"값 치환"})]}),(0,l.jsx)("button",{type:"button",onClick:()=>x(e.id),className:"p-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"+"}),i.length>1&&(0,l.jsx)("button",{type:"button",onClick:()=>p(e.id),className:"p-2 bg-red-500 text-white rounded-md hover:bg-red-600",children:"-"})]},e.id))})]})},u=(0,r.forwardRef)((e,t)=>{let{question:s,isRequired:o=!1,options:d=[],allQuestions:x=[],currentQuestionId:p="",condition:m=[],onQuestionChange:h,onRequiredChange:b,onOptionsChange:g,onOptionCountChange:j,onConditionChange:f}=e;u.displayName="SingleChoiceEditor";let[v,y]=(0,r.useState)("ko"),[N,C]=(0,r.useState)(s),[w,k]=(0,r.useState)(o),[E,I]=(0,r.useState)(d&&d.length>0?d:[{id:(0,a.A)(),text:"항목 1",score:0},{id:(0,a.A)(),text:"항목 2",score:0}]),_=E.length,[S,L]=(0,r.useState)(m||[]),q=e=>"ko"===e?"text":"text_".concat(e),O=(e,t)=>{let s=Number.isFinite(t)?t:0,l=E.map(t=>t.id===e?{...t,score:s}:t);I(l),null==g||g(l)};(0,r.useEffect)(()=>{C(s),k(o),L(m),d.length>0&&I(d)},[s,o,d,m]),(0,r.useImperativeHandle)(t,()=>({getState:()=>({options:E,optionCount:_,question:N,isRequired:w,conditions:S})}));let A=(e,t)=>{let s=q(v),l=E.map(l=>l.id===e?{...l,[s]:t}:l);I(l),null==g||g(l)},T=e=>{let t=E.filter(t=>t.id!==e);if(t.length<2)return void alert("최소 2개 이상의 선택지가 필요합니다.");I(t),null==g||g(t),null==j||j(t.length)};return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-4 p-2 bg-gray-100 rounded-md",children:[(0,l.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"언어:"}),n.AT.map(e=>(0,l.jsx)("button",{onClick:()=>y(e),className:"px-3 py-1 text-sm rounded-md transition-colors ".concat(v===e?"bg-blue-500 text-white shadow":"bg-white text-gray-700 hover:bg-gray-200"),children:n.a4[e]},e))]}),(0,l.jsx)(c,{initialQuestion:N[q(v)]||"",onQuestionChange:e=>{let t=q(v);C({...N,[t]:e}),null==h||h({[t]:e})}},v),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"선택 항목"}),(0,l.jsx)("button",{onClick:()=>{let e=(0,a.A)(),t=q(v),s={id:e,text:"",text_en:"",text_ja:"",text_zh:"",score:0};s[t]="항목 ".concat(E.length+1);let l=[...E,s];I(l),null==g||g(l),null==j||j(l.length)},className:"text-sm text-blue-600 hover:text-blue-800",children:"+ 항목 추가"})]}),(0,l.jsx)("div",{className:"space-y-2",children:E.map(e=>{var t;return(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"radio",disabled:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),(0,l.jsx)("input",{type:"text",className:"ml-2 flex-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:e[q(v)]||"",onChange:t=>A(e.id,t.target.value),placeholder:"선택지"}),(0,l.jsx)("input",{type:"number",className:"ml-2 w-24 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:null!=(t=e.score)?t:0,onChange:t=>{let s=t.target.value;O(e.id,""===s?0:parseFloat(s))},placeholder:"점수",min:0}),E.length>1&&(0,l.jsx)("button",{type:"button",onClick:()=>T(e.id),className:"ml-2 text-red-500 hover:text-red-700",children:"\xd7"})]},e.id)})})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",id:"required",checked:w,onChange:e=>{k(e.target.checked),null==b||b(e.target.checked)},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,l.jsx)("label",{htmlFor:"required",className:"ml-2 block text-sm text-gray-700",children:"필수 질문"})]}),(0,l.jsx)("div",{className:"mt-6 border-t pt-4",children:(0,l.jsx)(i,{allQuestions:x,currentQuestionId:p||"",conditions:S,onConditionChange:e=>{L(e),null==f||f(e)},className:"mt-4"})})]})});function x(e){let{question:t,onUpdate:s,allQuestions:o}=e,[d,u]=(0,r.useState)("ko"),x=e=>"ko"===e?"text":"text_".concat(e),p=(e,l)=>{let r=x(d),n=t.props.options.map(t=>t.id===e?{...t,[r]:l}:t);s({props:{...t.props,options:n}})},m=(e,l)=>{let r=t.props.options.map(t=>t.id===e?{...t,score:l}:t);s({props:{...t.props,options:r}})},h=e=>{if(t.props.options.length<=2)return void alert("최소 2개 이상의 선택지가 필요합니다.");let l=t.props.options.filter(t=>t.id!==e);s({props:{...t.props,options:l}})},b=x(d);return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-4 p-2 bg-gray-100 rounded-md",children:[(0,l.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"언어:"}),n.AT.map(e=>(0,l.jsx)("button",{onClick:()=>u(e),className:"px-3 py-1 text-sm rounded-md transition-colors ".concat(d===e?"bg-blue-500 text-white shadow":"bg-white text-gray-700 hover:bg-gray-200"),children:n.a4[e]},e))]}),(0,l.jsx)(c,{initialQuestion:t[x(d)]||"",onQuestionChange:e=>{let l=x(d);s({...t,[l]:e})}},d),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"선택 항목"}),(0,l.jsx)("button",{onClick:()=>{let e={id:(0,a.A)(),text:"항목 ".concat(t.props.options.length+1),score:0},l=[...t.props.options,e];s({props:{...t.props,options:l}})},className:"text-sm text-blue-600 hover:text-blue-800",children:"+ 항목 추가"})]}),(0,l.jsx)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:t.props.options.map(e=>{var s;return(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"radio",disabled:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),(0,l.jsx)("input",{type:"text",className:"ml-2 flex-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:e[b]||"",onChange:t=>p(e.id,t.target.value),placeholder:"선택지"}),(0,l.jsx)("input",{type:"number",className:"ml-2 w-24 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:null!=(s=e.score)?s:0,onChange:t=>{let s=t.target.value;m(e.id,""===s?0:parseFloat(s))},placeholder:"점수",min:0}),t.props.options.length>1&&(0,l.jsx)("button",{type:"button",onClick:()=>h(e.id),className:"ml-2 text-red-500 hover:text-red-700",children:"\xd7"})]},e.id)})})]}),(0,l.jsx)(i,{conditions:t.condition||[],allQuestions:o.filter(e=>e.id!==t.id),currentQuestionId:t.id,onConditionChange:e=>{s({condition:e})}})]})}let p=(0,r.forwardRef)((e,t)=>{let{question:s,isRequired:o=!1,options:d=[],allQuestions:u=[],currentQuestionId:x="",condition:m=[],onQuestionChange:h,onRequiredChange:b,onOptionsChange:g,onOptionCountChange:j,onConditionChange:f}=e;p.displayName="MultipleChoiceEditor";let[v,y]=(0,r.useState)("ko"),[N,C]=(0,r.useState)(()=>s),[w,k]=(0,r.useState)(()=>o),[E,I]=(0,r.useState)(()=>d.length>0?d:[{id:(0,a.A)(),text:"항목 1",score:0},{id:(0,a.A)(),text:"항목 2",score:0}]),[_,S]=(0,r.useState)(()=>m),L=e=>"ko"===e?"text":"text_".concat(e),q=e=>e.reduce((e,t)=>1+(t.children?q(t.children):0),0);(0,r.useImperativeHandle)(t,()=>({getState:()=>({options:E,optionCount:q(E),question:N,isRequired:w,conditions:_})}));let O=e=>{I(e),null==g||g(e);let t=q(e);return null==j||j(t),e},A=(e,t,s)=>e.map(e=>e.id===t?{...e,score:s}:e.children?{...e,children:A(e.children,t,s)}:e),T=(e,t)=>{O(A(E,e,Number.isFinite(t)?t:0))},H=(e,t,s,l)=>{let r=L(l);return e.map(e=>e.id===t?{...e,[r]:s}:e.children?{...e,children:H(e.children,t,s,l)}:e)},R=(e,t)=>{O(H(E,e,t,v))},M=(e,t)=>e.filter(e=>e.id!==t).map(e=>e.children?{...e,children:M(e.children,t)}:e),P=e=>{O(M(E,e))},Q=(e,t)=>{let s=L(v);return e.map(e=>{if(e.id===t){let t={id:(0,a.A)(),text:"",score:0,[s]:"하위 옵션"},l=e.children?[...e.children,t]:[t];return{...e,children:l}}return e.children?{...e,children:Q(e.children,t)}:e})},U=e=>{O(Q(E,e))},G=(e,t)=>{let s=[],l=!1;for(let r of e)if(s.push(r),r.id===t){let e=L(v),t={id:(0,a.A)(),text:"",score:0,[e]:"새 옵션"};s.push(t),l=!0}return l?s:e.map(e=>e.children?{...e,children:G(e.children,t)}:e)},D=e=>{O(G(E,e))},B=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map(e=>{var s;return(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center",style:{marginLeft:"".concat(2*t,"rem")},children:[(0,l.jsx)("input",{type:"checkbox",disabled:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,l.jsx)("input",{type:"text",className:"ml-2 flex-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:e[L(v)]||"",onChange:t=>R(e.id,t.target.value),placeholder:"선택지"}),(0,l.jsx)("input",{type:"number",className:"ml-2 w-24 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:null!=(s=e.score)?s:0,onChange:t=>{let s=t.target.value;T(e.id,""===s?0:parseFloat(s))},placeholder:"점수",min:0}),t>0&&(0,l.jsx)("button",{type:"button",onClick:()=>D(e.id),className:"ml-2 text-sm text-green-600 hover:text-green-800 whitespace-nowrap",children:"옵션 추가"}),(0,l.jsx)("button",{type:"button",onClick:()=>U(e.id),className:"ml-2 text-sm text-blue-600 hover:text-blue-800 whitespace-nowrap",children:"하위 추가"}),(0,l.jsx)("button",{type:"button",onClick:()=>P(e.id),className:"ml-2 text-red-500 hover:text-red-700",children:"\xd7"})]}),e.children&&B(e.children,t+1)]},e.id)})};return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-4 p-2 bg-gray-100 rounded-md",children:[(0,l.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"언어:"}),n.AT.map(e=>(0,l.jsx)("button",{onClick:()=>y(e),className:"px-3 py-1 text-sm rounded-md transition-colors ".concat(v===e?"bg-blue-500 text-white shadow":"bg-white text-gray-700 hover:bg-gray-200"),children:n.a4[e]},e))]}),(0,l.jsx)(c,{initialQuestion:N[L(v)]||"",onQuestionChange:e=>{let t=L(v);C({...N,[t]:e}),null==h||h({[t]:e})}},v),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"선택 항목"}),(0,l.jsx)("button",{onClick:()=>{let e={id:(0,a.A)(),text:"",score:0,[L(v)]:"항목 ".concat(E.length+1)};O([...E,e])},className:"text-sm text-blue-600 hover:text-blue-800",children:"+ 항목 추가"})]}),(0,l.jsx)("div",{className:"space-y-2",children:B(E)})]}),(0,l.jsx)("div",{className:"mt-6 border-t pt-4",children:(0,l.jsx)(i,{allQuestions:u,currentQuestionId:x,conditions:_,onConditionChange:e=>{S(e),null==f||f(e)},className:"mt-4"})}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",id:"required",checked:w,onChange:e=>{k(e.target.checked),null==b||b(e.target.checked)},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,l.jsx)("label",{htmlFor:"required",className:"ml-2 block text-sm text-gray-700",children:"필수 질문"})]})]})});function m(e){let{question:t,onUpdate:s,allQuestions:o}=e,[d,u]=(0,r.useState)("ko"),x=e=>"ko"===e?"text":"text_".concat(e),p=(e,l)=>{let r=x(d),n=t.props.options.map(t=>t.id===e?{...t,[r]:l}:t);s({props:{...t.props,options:n}})},m=(e,l)=>{let r=t.props.options.map(t=>t.id===e?{...t,score:l}:t);s({props:{...t.props,options:r}})},h=e=>{if(t.props.options.length<=1)return void alert("최소 1개 이상의 선택지가 필요합니다.");let l=t.props.options.filter(t=>t.id!==e);s({props:{...t.props,options:l}})},b=x(d);return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-4 p-2 bg-gray-100 rounded-md",children:[(0,l.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"언어:"}),n.AT.map(e=>(0,l.jsx)("button",{onClick:()=>u(e),className:"px-3 py-1 text-sm rounded-md transition-colors ".concat(d===e?"bg-blue-500 text-white shadow":"bg-white text-gray-700 hover:bg-gray-200"),children:n.a4[e]},e))]}),(0,l.jsx)(c,{initialQuestion:t[x(d)]||"",onQuestionChange:e=>{let l=x(d);s({...t,[l]:e})}},d),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"선택 항목"}),(0,l.jsx)("button",{onClick:()=>{let e={id:(0,a.A)(),text:"항목 ".concat(t.props.options.length+1),score:0},l=[...t.props.options,e];s({props:{...t.props,options:l}})},className:"text-sm text-blue-600 hover:text-blue-800",children:"+ 항목 추가"})]}),(0,l.jsx)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:t.props.options.map(e=>{var s;return(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",disabled:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,l.jsx)("input",{type:"text",className:"ml-2 flex-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:e[b]||"",onChange:t=>p(e.id,t.target.value),placeholder:"선택지"}),(0,l.jsx)("input",{type:"number",className:"ml-2 w-24 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:null!=(s=e.score)?s:0,onChange:t=>{let s=t.target.value;m(e.id,""===s?0:parseFloat(s))},placeholder:"점수",min:0}),t.props.options.length>1&&(0,l.jsx)("button",{type:"button",onClick:()=>h(e.id),className:"ml-2 text-red-500 hover:text-red-700",children:"\xd7"})]},e.id)})})]}),(0,l.jsx)(i,{conditions:t.condition||[],allQuestions:o.filter(e=>e.id!==t.id),currentQuestionId:t.id,onConditionChange:e=>{s({condition:e})}})]})}let h=(0,r.forwardRef)((e,t)=>{let{question:s="",isRequired:n=!1,rows:a=[{id:"r1",label:"항목 1"},{id:"r2",label:"항목 2"}],columns:o=[{id:"c1",label:"열 1",subColumns:[{id:"sc1",label:"하위 1-1"},{id:"sc2",label:"하위 1-2"}]},{id:"c2",label:"열 2",subColumns:[{id:"sc3",label:"하위 2-1"},{id:"sc4",label:"하위 2-2"}]}],allQuestions:d=[],currentQuestionId:u="",condition:x=[],onQuestionChange:p,onRequiredChange:m,onRowsChange:b,onColumnsChange:g,onOptionCountChange:j,onColumnCountChange:f,onSubColumnCountsChange:v,onConditionChange:y}=e;h.displayName="SideBySideEditor";let[N,C]=(0,r.useState)(s),[w,k]=(0,r.useState)(n),[E,I]=(0,r.useState)(a),[_,S]=(0,r.useState)(o),[L,q]=(0,r.useState)(x||[]);(0,r.useEffect)(()=>{q(x)},[x]),(0,r.useEffect)(()=>{C(s),k(n),I(a),S(o)},[s,n,a,o]);let O=()=>{let e={id:"row-".concat(Date.now()),label:"항목 ".concat(E.length+1)},t=[...E,e];I(t),null==b||b(t),null==j||j(t.length)},A=(e,t)=>{let s=E.map(s=>s.id===e?{...s,label:t}:s);I(s),null==b||b(s)},T=e=>{if(E.length<=1)return;let t=E.filter(t=>t.id!==e);I(t),null==b||b(t),null==j||j(t.length)},H=()=>{let e="col-".concat(Date.now()),t={id:e,label:"열 ".concat(_.length+1),subColumns:[{id:"".concat(e,"-1"),label:"옵션 1"},{id:"".concat(e,"-2"),label:"옵션 2"}]},s=[..._,t];S(s),null==g||g(s),null==f||f(s.length),null==v||v(s.map(e=>e.subColumns.length))},R=(e,t)=>{let s=_.map(s=>s.id===e?{...s,label:t}:s);S(s),null==g||g(s)},M=e=>{if(_.length<=1)return;let t=_.filter(t=>t.id!==e);S(t),null==g||g(t),null==f||f(t.length),null==v||v(t.map(e=>e.subColumns.length))},P=e=>{let t=_.map(t=>{if(t.id===e){let s={id:"".concat(e,"-").concat(t.subColumns.length+1),label:"옵션 ".concat(t.subColumns.length+1)};return{...t,subColumns:[...t.subColumns,s]}}return t});S(t),null==g||g(t),null==v||v(t.map(e=>e.subColumns.length))},Q=(e,t,s)=>{s.stopPropagation();let l=_.map(s=>s.id===e&&s.subColumns.length>1?{...s,subColumns:s.subColumns.filter(e=>e.id!==t)}:s);S(l),null==g||g(l),null==v||v(l.map(e=>e.subColumns.length))},U=(e,t,s)=>{let l=_.map(l=>{if(l.id===e){let e=l.subColumns.map(e=>e.id===t?{...e,label:s}:e);return{...l,subColumns:e}}return l});S(l),null==g||g(l)};return(0,r.useImperativeHandle)(t,()=>({getState:()=>({question:N,isRequired:w,rows:E,columns:_,sideBySideOptions:E.map(e=>({id:e.id,text:e.label,descriptionCount:0,columns:_.map(e=>({title:e.label,answers:e.subColumns.map(e=>({id:e.id,text:e.label}))}))})),optionCount:E.length,columnCount:_.length,subColumnCounts:_.map(e=>e.subColumns.length),conditions:L})})),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)(c,{initialQuestion:N,onQuestionChange:e=>{C(e),null==p||p(e)}}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"행 관리"}),(0,l.jsx)("button",{type:"button",onClick:e=>{var t;e.preventDefault(),T(null==(t=E[E.length-1])?void 0:t.id)},disabled:E.length<=1,className:"p-1 rounded-full bg-red-500 text-white disabled:opacity-50 disabled:cursor-not-allowed",title:"마지막 행 삭제",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,l.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),O()},className:"p-1 rounded-full bg-blue-500 text-white",title:"행 추가",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"열 그룹 관리"}),(0,l.jsx)("button",{type:"button",onClick:e=>{var t;e.preventDefault(),M(null==(t=_[_.length-1])?void 0:t.id)},disabled:_.length<=1,className:"p-1 rounded-full bg-red-500 text-white disabled:opacity-50 disabled:cursor-not-allowed",title:"마지막 열 그룹 삭제",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,l.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),H()},className:"p-1 rounded-full bg-blue-500 text-white",title:"열 그룹 추가",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]}),(0,l.jsx)("div",{className:"relative border rounded-md p-4 bg-white",children:(0,l.jsx)("div",{className:"overflow-x-auto -mx-4 px-4",children:(0,l.jsx)("div",{className:"relative",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 table-fixed border-collapse",children:[(0,l.jsxs)("thead",{className:"bg-gray-50",children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"w-[200px] px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gray-50 whitespace-nowrap",style:{width:"200px"},children:(0,l.jsx)("span",{children:"항목"})}),_.map(e=>(0,l.jsx)("th",{colSpan:e.subColumns.length,className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider relative group whitespace-nowrap",children:(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,l.jsx)("input",{type:"text",value:e.label,onChange:t=>R(e.id,t.target.value),className:"p-1 text-center bg-transparent focus:bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 rounded-md w-24"}),(0,l.jsx)("button",{type:"button",onClick:()=>P(e.id),className:"p-0.5 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",title:"서브 컬럼 추가",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M12 4v16m8-8H4"})})})]})},e.id))]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"w-[200px] bg-gray-50",style:{width:"200px"}}),_.map(e=>e.subColumns.map(t=>(0,l.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[(0,l.jsx)("input",{type:"text",value:t.label,onChange:s=>U(e.id,t.id,s.target.value),className:"p-1 text-center bg-transparent focus:bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 rounded-md w-24"}),(0,l.jsx)("button",{type:"button",onClick:s=>Q(e.id,t.id,s),className:"p-0.5 text-xs bg-red-500 text-white rounded hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",disabled:e.subColumns.length<=1,title:"마지막 서브 컬럼 삭제",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M20 12H4"})})})]})},t.id)))]})]}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap border-r bg-white",style:{width:"200px",minWidth:"200px"},children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"text",className:"border-0 p-0 focus:ring-0 focus:border-blue-500 block w-full sm:text-sm",value:e.label,onChange:t=>A(e.id,t.target.value)}),E.length>1&&(0,l.jsx)("button",{type:"button",onClick:t=>{t.preventDefault(),T(e.id)},className:"ml-2 p-1 rounded-full text-gray-400 hover:bg-gray-100 hover:text-gray-600",title:"행 삭제",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),_.map(t=>t.subColumns.map(s=>(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center border-l",children:(0,l.jsx)("input",{type:"radio",name:"".concat(e.id,"-").concat(t.id),className:"focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300"})},s.id)))]},e.id))})]})})})}),(0,l.jsx)("div",{className:"flex justify-end items-center mt-4",children:(0,l.jsx)("div",{className:"flex items-center space-x-4",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{id:"is-required",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:w,onChange:e=>{k(e.target.checked),null==m||m(e.target.checked)}}),(0,l.jsx)("label",{htmlFor:"is-required",className:"ml-2 block text-sm text-gray-900",children:"필수 응답"})]})})}),(0,l.jsx)("div",{className:"mt-6 border-t pt-4",children:(0,l.jsx)(i,{allQuestions:d,currentQuestionId:u,conditions:L,onConditionChange:e=>{q(e),null==y||y(e)},className:"mt-4"})})]})}),b=(0,r.forwardRef)((e,t)=>{var s,a,o;let{question:d,isRequired:u=!1,maxLength:x,isLongText:p=!0,allQuestions:m=[],currentQuestionId:h="",condition:g=[],onQuestionChange:j,onRequiredChange:f,onMaxLengthChange:v,onIsLongTextChange:y,onConditionChange:N}=e;b.displayName="TextEntryEditor";let[C,w]=(0,r.useState)("ko"),[k,E]=(0,r.useState)(d),[I,_]=(0,r.useState)(u),[S,L]=(0,r.useState)(x),[q,O]=(0,r.useState)(p),[A,T]=(0,r.useState)(g||[]),H=e=>"ko"===e?"text":"text_".concat(e),R=e=>{let t=H(C),s={...k.props||{},[t]:e};E({...k,props:s}),null==j||j({props:s})};return(0,r.useEffect)(()=>{T(g)},[g]),(0,r.useEffect)(()=>{E(d),_(u),L(x),O(p)},[d,u,x,p]),(0,r.useImperativeHandle)(t,()=>({getState:()=>({question:k,isRequired:I,maxLength:S||250,isLongText:q,conditions:A})})),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-4 p-2 bg-gray-100 rounded-md",children:[(0,l.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"언어:"}),n.AT.map(e=>(0,l.jsx)("button",{onClick:()=>w(e),className:"px-3 py-1 text-sm rounded-md transition-colors ".concat(C===e?"bg-blue-500 text-white shadow":"bg-white text-gray-700 hover:bg-gray-200"),children:n.a4[e]},e))]}),(0,l.jsx)(c,{initialQuestion:k[H(C)]||"",onQuestionChange:e=>{let t=H(C);E({...k,[t]:e}),null==j||j({[t]:e})}},"question-".concat(C)),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"placeholder",className:"block text-sm font-medium text-gray-700",children:"자리 표시자 (Placeholder)"}),(0,l.jsx)("input",{type:"text",id:"placeholder",className:"w-full p-2 border border-gray-300 rounded-md",value:(null==(s=k.props.placeholder)?void 0:s[H(C)])||"",onChange:e=>R(e.target.value)},"placeholder-".concat(C))]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",id:"longText",checked:q,onChange:e=>{let t=e.target.checked;O(t),null==y||y(t)},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,l.jsx)("label",{htmlFor:"longText",className:"ml-2 block text-sm text-gray-700",children:"긴 텍스트 (여러 줄 입력)"})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",id:"required",checked:I,onChange:e=>{let t=e.target.checked;_(t),null==f||f(t)},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,l.jsx)("label",{htmlFor:"required",className:"ml-2 block text-sm text-gray-700",children:"필수 질문"})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("label",{htmlFor:"maxLength",className:"block text-sm font-medium text-gray-700 mr-2",children:"최대 글자수:"}),(0,l.jsx)("input",{type:"number",id:"maxLength",min:"1",max:"10000",value:S||"",onChange:e=>{let t=e.target.value?parseInt(e.target.value):void 0;L(t),null==v||v(t)},className:"w-24 p-1 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),(0,l.jsxs)("div",{className:"mt-4 border border-gray-200 rounded-md p-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"미리보기"}),(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[k[H(C)]||"질문 미리보기",I&&(0,l.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),q?(0,l.jsx)("textarea",{className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",rows:4,placeholder:(null==(a=k.props.placeholder)?void 0:a[H(C)])||"답변을 입력하세요",maxLength:S,readOnly:!0}):(0,l.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:(null==(o=k.props.placeholder)?void 0:o[H(C)])||"답변을 입력하세요",maxLength:S,readOnly:!0}),(0,l.jsxs)("p",{className:"mt-1 text-xs text-gray-500 text-right",children:[S,"자 이내"]})]})]}),(0,l.jsx)("div",{className:"mt-6 border-t pt-4",children:(0,l.jsx)(i,{allQuestions:m,currentQuestionId:h,conditions:A,onConditionChange:e=>{T(e),null==N||N(e)},className:"mt-4"})})]})}),g=(0,r.forwardRef)((e,t)=>{let{question:s="",isRequired:a=!1,questions:o=[],allQuestions:d=[],currentQuestionId:c="",condition:u=[],onQuestionChange:x,onQuestionsChange:p,onConditionChange:m,onUpdateQuestion:h}=e,[b,g]=(0,r.useState)(s),[j,f]=(0,r.useState)(a),[v,y]=(0,r.useState)(o||[]),[N,C]=(0,r.useState)(u||[]);(0,r.useEffect)(()=>{C(u)},[u]),(0,r.useEffect)(()=>{g(s),f(a),o&&y(o)},[s,a,o]);let w=(0,r.useMemo)(()=>{let e=new Set;return d.forEach(t=>{t.type===n.xi.GROUP&&t.id!==c&&(Array.isArray(t.props.questions)?t.props.questions:[]).forEach(t=>{let s="object"==typeof t?t.id:t;s&&e.add(s)})}),d.forEach(t=>{t.isGroup&&t.groupId&&t.groupId!==c&&e.add(t.id)}),d.filter(t=>!(t.id===c||v.includes(t.id)||e.has(t.id))&&t.type!==n.xi.GROUP)},[d,c,v]),k=e=>{let t=[...v,e];y(t),null==p||p(t),console.log("updatedSelection : ",t),null==h||h(e,{isGroup:!0,groupId:c})},E=e=>{let t=v.filter(t=>t!==e);y(t),null==p||p(t),null==h||h(e,{isGroup:!1,groupId:void 0})},I=e=>{let t=e.questionNumber?"".concat(e.questionNumber,". "):"";return"".concat(t).concat(e.text)},_=()=>d.filter(e=>v.includes(e.id));return(0,r.useImperativeHandle)(t,()=>({getState:()=>({question:b,isRequired:j,questions:_(),conditions:N})})),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"그룹 제목"}),(0,l.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:b,onChange:e=>{let t=e.target.value;g(t),null==x||x(t)},placeholder:"그룹 제목을 입력하세요"})]}),(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsx)("h3",{className:"text-lg font-medium mb-4",children:"그룹에 포함된 질문"}),(0,l.jsx)("div",{className:"space-y-3 mb-4",children:0===_().length?(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"그룹에 포함된 질문이 없습니다. 아래에서 질문을 선택해 주세요."}):_().map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md border border-gray-200",children:[(0,l.jsx)("span",{className:"text-sm",children:I(e)}),(0,l.jsx)("button",{type:"button",onClick:()=>E(e.id),className:"text-red-500 hover:text-red-700",title:"그룹에서 제거",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},e.id))}),w.length>0&&(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("label",{htmlFor:"question-selector",className:"block text-sm font-medium text-gray-700 mb-1",children:"질문 추가하기"}),(0,l.jsxs)("select",{id:"question-selector",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",onChange:e=>{e.target.value&&(k(e.target.value),e.target.value="")},value:"",children:[(0,l.jsx)("option",{value:"",children:"질문을 선택하세요"}),w.map(e=>(0,l.jsx)("option",{value:e.id,children:I(e)||"(제목 없음) - ".concat(e.type)},e.id))]})]})]}),(0,l.jsx)("div",{className:"mt-6 border-t pt-4",children:(0,l.jsx)(i,{allQuestions:d,currentQuestionId:c,conditions:N,onConditionChange:e=>{C(e),null==m||m(e)},className:"mt-4"})})]})});function j(e){var t,s,r;let{question:i,questions:a,onUpdate:o,onUpdateQuestionById:d}=e,c={question:i.text,isRequired:i.isRequired||!1,allQuestions:a.filter(e=>e.id!==i.id&&e.type!==n.xi.GROUP),currentQuestionId:i.id,condition:i.condition||[],isGroup:i.isGroup||!1,groupId:i.groupId||void 0,onQuestionChange:e=>o({text:e}),onRequiredChange:e=>o({isRequired:e}),onConditionChange:e=>o({condition:e})};switch(i.type){case n.xi.GROUP:return(0,l.jsx)(g,{...c,questions:(null==(t=i.props.questions)?void 0:t.map(e=>e.id))||[],onUpdateQuestion:d,onQuestionsChange:e=>{let t=a.filter(t=>e.includes(t.id));o({props:{...i.props,questions:t}})}},i.id);case n.xi.MULTIPLE_CHOICE:return(0,l.jsx)(p,{question:i,options:i.props.options||[],onQuestionChange:e=>o(e),onOptionsChange:e=>o({props:{...i.props,options:e}}),onConditionChange:e=>o({condition:e}),allQuestions:a.filter(e=>e.id!==i.id&&e.type!==n.xi.GROUP),currentQuestionId:i.id,condition:i.condition});case n.xi.SINGLE_CHOICE:return(0,l.jsx)(u,{question:i,isRequired:i.isRequired,options:i.props.options||[],onQuestionChange:e=>o(e),onOptionsChange:e=>o({props:{...i.props,options:e}}),onConditionChange:e=>o({condition:e}),onRequiredChange:e=>o({isRequired:e}),allQuestions:a.filter(e=>e.id!==i.id&&e.type!==n.xi.GROUP),currentQuestionId:i.id,condition:i.condition},i.id);case n.xi.SINGLE_CHOICE_2:return(0,l.jsx)(x,{question:i,onUpdate:o,allQuestions:a.filter(e=>e.id!==i.id)});case n.xi.MULTIPLE_CHOICE_2:return(0,l.jsx)(m,{question:i,onUpdate:o,allQuestions:a.filter(e=>e.id!==i.id)});case n.xi.SIDE_BY_SIDE:{let e=i.props;return(0,l.jsx)(h,{...c,rows:(null!=(s=e.rows)?s:[]).map(e=>({id:e.id,label:e.text})),columns:(null!=(r=e.columns)?r:[]).map(e=>{var t;return{id:e.id,label:e.text,subColumns:(null==(t=e.subColumns)?void 0:t.map(e=>({id:e.id,label:e.label})))||[]}}),onRowsChange:t=>{o({props:{...e,rows:t.map((t,s)=>{var l;return{...(null==(l=e.rows)?void 0:l[s])||{id:t.id},id:t.id,text:t.label}})}})},onColumnsChange:t=>{o({props:{...e,columns:t.map((t,s)=>{var l,r;return{...(null==(l=e.columns)?void 0:l[s])||{id:t.id,subColumns:[]},id:t.id,text:t.label,subColumns:(null==(r=t.subColumns)?void 0:r.map((t,l)=>{var r,n,i;return{...(null==(i=e.columns)||null==(n=i[s])||null==(r=n.subColumns)?void 0:r[l])||{id:t.id},id:t.id,label:t.label}}))||[]}})}})}},i.id)}case n.xi.TEXT_ENTRY:return(0,l.jsx)(b,{question:i,isRequired:i.isRequired,maxLength:i.props.maxLength,isLongText:i.props.isLongText,onQuestionChange:e=>o(e),onRequiredChange:e=>o({isRequired:e}),onMaxLengthChange:e=>o({props:{...i.props,maxLength:e}}),onIsLongTextChange:e=>o({props:{...i.props,isLongText:e}}),allQuestions:a.filter(e=>e.id!==i.id&&e.type!==n.xi.GROUP),currentQuestionId:i.id,condition:i.condition,onConditionChange:e=>o({condition:e})},i.id);default:return null}}g.displayName="GroupEditor"},67706:(e,t,s)=>{s.d(t,{H:()=>r,V:()=>l});let l=e=>e?e.replace(/\{\{(.+?)\}\}/g,"$1"):"",r=e=>{if(!e)return e;let t={...e},s=t.text||"";return(""===t.text_en||null===t.text_en||void 0===t.text_en)&&(t.text_en=s),(""===t.text_ja||null===t.text_ja||void 0===t.text_ja)&&(t.text_ja=s),(""===t.text_zh||null===t.text_zh||void 0===t.text_zh)&&(t.text_zh=s),t}},76221:(e,t,s)=>{s.d(t,{V:()=>i});var l=s(95155);s(12115);var r=s(52363),n=s(67706);function i(e){var t,s;let{question:i,index:a,onUpdate:o,onRemove:d,onToggleExpand:c,renderEditor:u,getGroupTitle:x}=e;return(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 border-b cursor-pointer",onClick:c,children:[(0,l.jsxs)("div",{className:"flex items-center",children:[i.type!==r.xi.GROUP&&(0,l.jsx)("input",{type:"text",className:"w-16 font-medium text-gray-700 mr-3 border border-gray-300 rounded px-1 py-0.5",value:i.questionNumber||"Q".concat(a+1),onChange:e=>{o({questionNumber:e.target.value})},onClick:e=>e.stopPropagation()}),(0,l.jsx)("h3",{className:"text-lg font-semibold",children:"".concat(a+1,". ").concat((0,n.V)(i.text))}),(0,l.jsxs)("span",{className:"ml-3 text-sm text-gray-500",children:[(e=>{switch(e){case r.xi.SINGLE_CHOICE:return"단일 선택";case r.xi.MULTIPLE_CHOICE:return"복수 선택";case r.xi.SIDE_BY_SIDE:return"병렬 비교";case r.xi.TEXT_ENTRY:return"텍스트 답변";case r.xi.GROUP:return"그룹";default:return""}})(i.type),i.groupId&&x&&(0,l.jsxs)("span",{className:"ml-2 px-2 py-0.5 bg-purple-100 text-purple-800 text-xs rounded-full",children:[x(i),"의 일부"]})]}),i.isRequired&&(0,l.jsx)("span",{className:"ml-2 text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full",children:"필수"}),(0,l.jsxs)("div",{className:"ml-4 flex items-center space-x-2 text-xs",onClick:e=>e.stopPropagation(),children:[(0,l.jsx)("label",{className:"text-gray-500",children:"페이지"}),(0,l.jsx)("input",{type:"number",min:1,className:"w-16 border border-gray-300 rounded px-1 py-0.5",value:null!=(t=i.page)?t:1,onChange:e=>o({page:Math.max(1,Number(e.target.value)||1)})}),(0,l.jsx)("label",{className:"text-gray-500",children:"순서"}),(0,l.jsx)("input",{type:"number",min:1,className:"w-16 border border-gray-300 rounded px-1 py-0.5",value:null!=(s=i.order)?s:a+1,onChange:e=>o({order:Math.max(1,Number(e.target.value)||1)})})]})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("button",{className:"text-gray-400 hover:text-gray-600",onClick:e=>{e.stopPropagation(),d()},children:(0,l.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),(0,l.jsx)("button",{className:"text-gray-400 hover:text-gray-600",onClick:e=>{e.stopPropagation(),c()},children:(0,l.jsx)("svg",{className:"w-5 h-5 transition-transform ".concat(i.isExpanded?"transform rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),i.isExpanded&&(0,l.jsx)("div",{className:"p-4",children:(0,l.jsx)("div",{className:"mb-4",children:u(i)})})]})}},91190:(e,t,s)=>{s.d(t,{z$:()=>a,WF:()=>n});let l=s(23464).A.create({baseURL:"http://localhost:8081",timeout:3e5,withCredentials:!0});l.interceptors.request.use(e=>e,e=>Promise.reject(e)),l.interceptors.response.use(async e=>e,e=>(console.log("axios error",e.response.data),e.response));let r=()=>{try{return JSON.parse(localStorage.getItem("savedSurveys")||"[]")}catch(e){return console.error("설문지 목록을 불러오는 중 오류가 발생했습니다:",e),[]}},n=(e,t)=>{try{let s=r(),l=new Date().toISOString();if(t){let r=s.findIndex(e=>e.id===t);-1!==r&&(s[r]={...s[r],...e,updatedAt:l})}else{let t={...e,id:"survey_".concat(Date.now()),createdAt:l,updatedAt:l};s.push(t)}return localStorage.setItem("savedSurveys",JSON.stringify(s)),i(e),t||""}catch(e){throw console.error("설문지 저장 중 오류가 발생했습니다:",e),Error("설문지 저장에 실패했습니다.")}},i=async e=>{console.log("surveyData : ",e);let t=await l.post("/api/nps/survey/test",e,{headers:{"Content-Type":"application/json"}});return console.log("resp:",t.data),t.data},a=e=>r().find(t=>t.id===e)},97357:(e,t,s)=>{s.d(t,{M:()=>d});var l=s(95155),r=s(12115),n=s(67706),i=s(52363),a=s(46269);let o=()=>(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,l.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"설문이 완료되었습니다."}),(0,l.jsx)("p",{className:"mt-2 text-gray-600",children:"참여해주셔서 감사합니다."})]});function d(e){var t,s,d,c,u,x,p,m;let{isOpen:h,onClose:b,questions:g,onSave:j,survey:f,onEdit:v,totalPages:y}=e,[N,C]=(0,r.useState)(f?{ko:null!=(t=f.title)?t:"",en:null!=(s=f.title_en)?s:"",ja:null!=(d=f.title_ja)?d:"",zh:null!=(c=f.title_zh)?c:""}:{ko:"",en:"",ja:"",zh:""}),[w,k]=(0,r.useState)(f?{ko:null!=(u=f.description)?u:"",en:null!=(x=f.description_en)?x:"",ja:null!=(p=f.description_ja)?p:"",zh:null!=(m=f.description_zh)?m:""}:{ko:"",en:"",ja:"",zh:""}),[E,I]=(0,r.useState)(!1),[_,S]=(0,r.useState)({}),[L,q]=(0,r.useState)({}),[O,A]=(0,r.useState)("ko"),[T,H]=(0,r.useState)(1),[R,M]=(0,r.useState)(!1),P=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return e&&(e["ko"===O?t:"".concat(t,"_").concat(O)]||e[t])||""},Q=e=>e?e.replace(/\{\{(.+?)\}\}/g,"$1"):"";(0,r.useEffect)(()=>{h&&(H(1),q((0,a.WY)(g,{})),S({}),M(!1))},[h,g]),(0,r.useEffect)(()=>{q((0,a.WY)(g,_))},[g,_]);let U=(e,t,s)=>{S(l=>{let r=l[e]||[];if(!s)return{...l,[e]:[t]};{let s=r.includes(t)?r.filter(e=>e!==t):[...r,t];return{...l,[e]:s}}})},G=e=>{for(let t=e;t<=y;t++)if(g.filter(e=>(e.page||1)===t&&!e.groupId).filter(e=>!1!==L[e.id]).length>0)return t;return -1},D=e=>{for(let t=e;t>=1;t--)if(g.filter(e=>(e.page||1)===t&&!e.groupId).filter(e=>!1!==L[e.id]).length>0)return t;return -1},B=(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"language-select",className:"block text-sm font-medium text-gray-700",children:P({text:"언어 선택"})}),(0,l.jsx)("select",{id:"language-select",value:O,onChange:e=>A(e.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:Object.keys(i.a4).map(e=>(0,l.jsx)("option",{value:e,children:i.a4[e]},e))})]}),F=(e,t)=>{let s=Q(P(e)),r=P(e,"description"),n=t?"".concat(t,". "):"";switch(e.type){case i.xi.SINGLE_CHOICE:case i.xi.MULTIPLE_CHOICE:case i.xi.SINGLE_CHOICE_2:case i.xi.MULTIPLE_CHOICE_2:case i.xi.CHECKBOX:{let t=e.type===i.xi.MULTIPLE_CHOICE||e.type===i.xi.MULTIPLE_CHOICE_2||e.type===i.xi.CHECKBOX,a=e.type===i.xi.SINGLE_CHOICE_2||e.type===i.xi.MULTIPLE_CHOICE_2,o=e.props.options||[],d=s=>{var r;return(0,l.jsxs)("label",{className:"flex items-center space-x-3 p-2 rounded-md hover:bg-gray-100 cursor-pointer",children:[(0,l.jsx)("input",{type:t?"checkbox":"radio",name:e.id,value:s.id,checked:(null==(r=_[e.id])?void 0:r.includes(s.id))||!1,onChange:()=>U(e.id,s.id,t),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),(0,l.jsx)("span",{children:P(s)})]},s.id)};return(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"text-lg font-medium",children:[n,s,e.isRequired&&(0,l.jsx)("span",{className:"ml-2 text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full",children:"필수"})]}),r&&(0,l.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:r}),(0,l.jsx)("div",{className:"mt-4 ".concat(a?"grid grid-cols-2 gap-x-4":"space-y-2"),children:a?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"space-y-2",children:o.slice(0,Math.ceil(o.length/2)).map(d)}),(0,l.jsx)("div",{className:"space-y-2",children:o.slice(Math.ceil(o.length/2)).map(d)})]}):o.map(d)})]})}case i.xi.TEXT_ENTRY:return(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"text-lg font-medium",children:[n,s,e.isRequired&&(0,l.jsx)("span",{className:"ml-2 text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full",children:"필수"})]}),r&&(0,l.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:r}),(0,l.jsx)("textarea",{className:"mt-2 p-2 border rounded-md w-full",rows:4,placeholder:P({text:"답변을 입력하세요..."}),onChange:t=>U(e.id,t.target.value,!1)})]});case i.xi.SIDE_BY_SIDE:{let t=e.props,i=t.rows||[],a=t.columns||[],o=a.flatMap(e=>(e.subColumns||[]).map(t=>({...t,columnId:e.id})));return(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"text-lg font-medium",children:[n,s,e.isRequired&&(0,l.jsx)("span",{className:"ml-2 text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full",children:"필수"})]}),r&&(0,l.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:r}),(0,l.jsx)("div",{className:"overflow-x-auto mt-4",children:(0,l.jsxs)("table",{className:"min-w-full border-collapse",children:[(0,l.jsxs)("thead",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"border p-2 bg-gray-100",rowSpan:2,style:{width:"200px"},children:P({text:"항목"})}),a.map(e=>(0,l.jsx)("th",{className:"border p-2 bg-gray-50",colSpan:(e.subColumns||[]).length,children:P(e)},e.id))]}),(0,l.jsx)("tr",{children:o.map(e=>(0,l.jsx)("th",{className:"border p-2 bg-gray-50 text-sm",children:P(e,"label")},e.id))})]}),(0,l.jsx)("tbody",{children:i.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"border p-2 font-medium align-top",style:{width:"200px"},children:P(e)}),o.map(t=>(0,l.jsx)("td",{className:"border p-2 text-center",children:(0,l.jsx)("input",{type:"radio",name:"row-".concat(e.id,"-").concat(t.columnId),className:"h-4 w-4 text-blue-600 focus:ring-blue-500"})},"".concat(t.columnId,"-").concat(t.id,"-").concat(e.id)))]},e.id))})]})})]})}case i.xi.GROUP:{if(!(0,i.wx)(e))return null;let t=g.filter(t=>t.groupId===e.id);return(0,l.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:s}),e.isRequired&&(0,l.jsx)("span",{className:"ml-2 text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full",children:"필수"})]}),r&&(0,l.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:r}),(0,l.jsx)("div",{className:"mt-4 space-y-6",children:t.map(e=>(0,l.jsx)("div",{className:"p-4 bg-white rounded-md border ".concat(!1===L[e.id]?"hidden":""),children:F(e,e.questionNumber||"")},e.id))})]})}default:return null}};if(!h)return null;let z=g.filter(e=>(e.page||1)===T&&!e.groupId);return(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-40",onClick:b,children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl h-[90vh] flex flex-col overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,l.jsx)("div",{className:"p-6 border-b",children:(0,l.jsxs)("div",{className:"flex justify-between items-start",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:P(f,"title")||P({text:"설문지 미리보기"})}),P(f,"description")&&(0,l.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:P(f,"description")})]}),(0,l.jsx)("button",{onClick:b,className:"text-gray-400 hover:text-gray-600",children:(0,l.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,l.jsx)("div",{className:"flex-grow overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 p-8",children:R?(0,l.jsx)(o,{}):(0,l.jsxs)(l.Fragment,{children:[B,(0,l.jsx)("div",{className:"space-y-6",children:z.map((e,t)=>(0,l.jsx)("div",{className:"p-6 rounded-lg shadow-sm bg-white border border-gray-200 ".concat(!1===L[e.id]?"hidden":""),children:F(e,e.questionNumber||t+1)},e.id))})]})}),!R&&(0,l.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 border-t",children:[(0,l.jsx)("div",{}),(0,l.jsxs)("div",{className:"flex items-center",children:[T>1&&(0,l.jsx)("button",{onClick:()=>{M(!1);let e=D(T-1);-1!==e&&H(e)},className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg",children:P({text:"이전"})}),(0,l.jsx)("button",{onClick:()=>{let e=g.filter(e=>(e.page||1)===T&&!1!==L[e.id]&&!e.groupId).flatMap(e=>e.type===i.xi.GROUP&&(0,i.wx)(e)?g.filter(t=>t.groupId===e.id&&t.isRequired&&!1!==L[t.id]):e.isRequired?[e]:[]).filter(e=>{let t=_[e.id];return!t||0===t.length||"string"==typeof t[0]&&""===t[0].trim()});if(e.length>0){let t=e[0],s=P(t)||"질문 ".concat(t.questionNumber);alert("'".concat(s,"' 질문은 필수 항목입니다. 답변을 입력해주세요."));return}let t=G(T+1);-1!==t?H(t):M(!0)},className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg ml-2",children:P({text:"다음"})})]})]}),(0,l.jsxs)("div",{className:"p-6 border-t bg-gray-50 flex justify-end space-x-3",children:[v&&f&&(0,l.jsx)("button",{onClick:()=>v(f.id),className:"px-5 py-2 text-white bg-green-600 rounded-lg hover:bg-green-700",children:P({text:"수정하기"})}),j&&(0,l.jsx)("button",{onClick:()=>{if(0===g.length)return void alert("저장할 질문이 없습니다. 질문을 먼저 추가해주세요.");I(!0)},className:"px-5 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:f?P({text:"업데이트"}):P({text:"설문지 저장"})})]}),E?(0,l.jsx)("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:()=>I(!1),children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-lg",onClick:e=>e.stopPropagation(),children:[(0,l.jsx)("h3",{className:"text-xl font-bold mb-4",children:P({text:"설문지 정보 입력"})}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[P({text:"설문지 제목 (KO)"})," ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("input",{type:"text",value:N.ko,onChange:e=>C(t=>({...t,ko:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:P({text:"설문지 설명 (KO)"})}),(0,l.jsx)("textarea",{value:w.ko,onChange:e=>k(t=>({...t,ko:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3})]})]}),(0,l.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,l.jsx)("button",{onClick:()=>I(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:P({text:"취소"})}),(0,l.jsx)("button",{onClick:()=>{var e;if(!(null==(e=N.ko)?void 0:e.trim()))return void alert("설문지 제목 (한국어)을 입력해주세요.");let t=(0,n.H)({text:N.ko,text_en:N.en,text_ja:N.ja,text_zh:N.zh}),s=(0,n.H)({text:w.ko,text_en:w.en,text_ja:w.ja,text_zh:w.zh}),l=g.map(e=>{let t=(0,n.H)(e);if("props"in t&&t.props){let e={...t.props};e.options&&Array.isArray(e.options)&&(e.options=e.options.map(n.H)),e.rows&&Array.isArray(e.rows)&&(e.rows=e.rows.map(n.H)),e.columns&&Array.isArray(e.columns)&&(e.columns=e.columns.map(n.H)),t.props=e}return t}),r={title:t.text,title_en:t.text_en,title_ja:t.text_ja,title_zh:t.text_zh,description:s.text,description_en:s.text_en,description_ja:s.text_ja,description_zh:s.text_zh,questions:l,totalPages:y};j&&j(r),I(!1),b()},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:P({text:"저장"})})]})]})}):null]})})}}}]);